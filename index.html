<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fargo's Souls Mod Accessory Browser</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <!-- If you're reading this, you will probably notice that this program is embarassingly unoptimized. Yes I used AI, yes I have no idea how to code, have fun looking around! -->
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        background-color: #121212;
        color: #e0e0e0;
        overflow-x: hidden;
      }
      .container {
        padding: 20px;
      }
      .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
      }
      .filter-button.active {
        background-color: #333;
        color: #00e676;
        border-color: #00e676;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
      }
      .card {
        background-color: #1f1f1f;
        border-radius: 10px;
        padding: 15px;
        border: 1px solid #333;
        box-shadow: 0 0 8px rgba(0, 255, 100, 0.05);
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        position: relative;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 255, 100, 0.1);
      }
      .title {
        font-size: 1.2em;
        margin-bottom: 8px;
        padding-right: 50px;
      }
      .stars {
        color: #ffeb3b;
        margin-bottom: 8px;
      }
      .type {
        font-size: 0.9em;
        color: #90caf9;
        margin-bottom: 10px;
      }
      .description {
        font-size: 0.95em;
        line-height: 1.4;
      }
      .search-wrapper {
        position: relative;
        width: 100%;
        margin-bottom: 20px;
      }

      #search {
        width: calc(100% - 2px);
        padding: 8px 30px 8px 8px;
        background-color: #1f1f1f;
        color: white;
        border: 1px solid #444;
        border-radius: 4px;
        box-sizing: border-box;
      }
      .clear-button {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        font-weight: bold;
        color: #aaa;
        cursor: pointer;
        user-select: none;
        opacity: 0.3;
      }
      .clear-button.active {
        opacity: 1;
      }
      .clear-button:hover {
        color: white;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.6);
      }
      .modal-content {
        background-color: #1f1f1f;
        margin: 10% auto;
        padding: 20px;
        border-radius: 8px;
        width: 80%;
        max-width: 600px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        color: #e0e0e0;
      }
      .close-button {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }
      .close-button:hover {
        color: white;
      }

      #bossModal h2 {
        margin-bottom: 15px;
        width: 100%;
        color: #00e676;
      }

      #bossModal .modal-content {
        width: 90%;
        max-width: none;
        max-height: 90vh;
        min-width: 700px; /* prevent shrinking */
        padding: 30px 40px;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        margin: 2% auto;
      }

      #bossModal .boss-filter-sections {
        display: flex;
        gap: 40px;
        flex: 1 1 100%;
        flex-wrap: nowrap; /* IMPORTANT: no wrapping */
        min-width: 0; /* prevent flexbox shrinking issues */
      }

      #bossModal .boss-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0; /* prevent overflow */
      }

      #bossModal .boss-section h3 {
        margin-bottom: 12px;
        font-weight: bold;
        font-size: 1.1em;
        color: #00e676;
      }

      #bossModal .boss-section label {
        margin-bottom: 8px;
        cursor: pointer;
        user-select: none;
      }

      #bossModal #bossConfirmBtn {
        margin-top: 20px;
        align-self: flex-end;
        padding: 8px 16px;
        background-color: #00e676;
        border: none;
        border-radius: 4px;
        color: #121212;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #bossModal #bossConfirmBtn:hover {
        background-color: #00c35a;
      }

      .filter-button {
        background-color: #1e1e1e;
        border: 1px solid #444;
        border-radius: 4px;
        padding: 8px 12px;
        cursor: pointer;
        color: white;
        transition: background-color 0.3s ease, opacity 0.2s;
        display: inline-flex;
        align-items: center;
        margin: 4px;
      }
      .filter-button:hover {
        background-color: #2a2a2a;
      }
      .filter-button.inactive {
        opacity: 0.5;
      }

      #bossModal .close-button {
        position: absolute;
        top: 12px;
        right: 12px;
        float: none; /* remove float */
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        user-select: none;
      }

      .filter-button .checkmark {
        margin-right: 6px;
        font-weight: bold;
        color: transparent;
        transition: color 0.2s;
      }

      .filter-button.active .checkmark {
        color: #32cd32; /* Bright green, same as other assets */
      }

      .filter-button .checkmark {
        display: inline-block;
        width: 16px; /* fixed width */
        height: 16px; /* fixed height */
        border: 2px solid #e0e0e0; /* green border */
        border-radius: 3px;
        margin-right: 6px;
        font-weight: bold;
        color: transparent; /* checkmark invisible by default */
        text-align: center;
        line-height: 14px; /* vertically center checkmark */
        transition: color 0.2s;
        user-select: none;
      }

      .filter-button.active .checkmark {
        color: #00e676; /* green checkmark visible */
        background-color: #1e1e1e; /* optional: fill background same as button */
      }

      #bossFiltersContainer {
  display: flex;
  gap: 40px;
  max-height: 60vh;
  overflow-y: auto;
  margin-top: 15px;
  flex-wrap: nowrap;
}

.boss-section {
  flex: 1;
  min-width: 0;
}

.boss-section label {
  margin-bottom: 4px; /* Reduce spacing between lines */
  display: inline-block;
  line-height: 1.2;   /* Tighten line spacing */
}

#bossFiltersContainer input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 2px solid #ccc;
  border-radius: 4px;
  background-color: transparent;
  cursor: pointer;
  vertical-align: middle;
  position: relative;
  margin-right: 6px;
  transition: border-color 0.2s ease;
}

#bossFiltersContainer input[type="checkbox"]:hover {
  border-color: #fff;
}

#bossFiltersContainer input[type="checkbox"]::before {
  content: "✔";
  position: absolute;
  top: -2px;
  left: 1px;
  font-size: 14px;
  color: #00e676;
  opacity: 0;
  transition: opacity 0.2s ease;
}

#bossFiltersContainer input[type="checkbox"]:checked::before {
  opacity: 1;
}

.boss-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
  user-select: none;
  cursor: pointer;
}

.boss-checkbox img.boss-icon {
  width: 18px;
  height: 18px;
  object-fit: contain;
  border-radius: 4px;
  margin-left: 6px;
}

#resetFiltersBtn:hover {
  background-color: #962727;
}


    </style>
  </head>
  <body>
    <div class="container">
      <div class="search-wrapper">
        <input type="text" id="search" placeholder="Search by item name..." />
        <span id="clearSearch" class="clear-button">&times;</span>
      </div>
      <div class="filters">
        <button class="filter-button" data-star="⭐">⭐</button>
        <button class="filter-button" data-star="⭐⭐">⭐⭐</button>
        <button class="filter-button" data-star="⭐⭐⭐">⭐⭐⭐</button>
        <button class="filter-button" data-star="⭐⭐⭐⭐">⭐⭐⭐⭐</button>
        <button class="filter-button" data-star="⭐⭐⭐⭐⭐">⭐⭐⭐⭐⭐</button>
        <button class="filter-button" data-type="Enchantment">
          Enchantments
        </button>
        <button class="filter-button" data-type="Force">Forces</button>
        <button class="filter-button" data-type="Soul">Souls</button>
        <button class="filter-button" data-type="Accessory">Other</button>
        <button class="filter-button" id="bossFilterBtn">Availability</button>
        <button id="dlcToggle" class="filter-button inactive">
          <span class="checkmark">✔</span> Show DLC Items
        </button>
        <button
          id="resetFiltersBtn"
          class="filter-button"
          style="
            margin-left: auto;
            background-color: #852323;
            border-color: #852323;
            color: white;
            transition: background-color 0.3s ease;
          "
        >
          Reset Filters
        </button>
      </div>
      <p>
        Database adapted from
        <a style="color: #00e676;"
          href="https://docs.google.com/document/d/1obh1n7TIxufvph4KQy1rv7rO4bL1au0XJNESTQptLZ4/edit?tab=t.0#heading=h.qz8l2nyjukur"
          >this document.</a
        >
      </p>
      <div class="grid" id="cards-container"></div>
    </div>

    <div id="cardModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <div id="modalBody"></div>
      </div>
    </div>
    <div id="bossModal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="closeBossModal">&times;</span>
        <p style="color: white; font-size: 1.1em; margin-bottom: 15px">
          <p style="color: white; font-size: 1.1em; margin-bottom: 15px;">
            Select one or more bosses you have defeated. This filter will then show only the items that become obtainable after defeating the selected boss(es), helping you discover new gear now available to you.
          </p>
          
        </p>

        <div id="bossFiltersContainer" style="max-height: 60vh; overflow-y: auto; margin-top: 3px; display: flex; gap: 40px; flex-wrap: nowrap;">

          <div class="boss-section">
            <h3 style="color: #00e676">Pre-Hardmode</h3>
            <label><input type="checkbox" value="Pre-Boss" /> No Bosses (Pre-Boss) <img class="boss-icon" data-boss="No Bosses" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Trojan Squirrel" /> Trojan Squirrel <img class="boss-icon" data-boss="Trojan Squirrel" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-King Slime" /> King Slime <img class="boss-icon" data-boss="King Slime" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Eye of Cthulhu" /> Eye of Cthulhu <img class="boss-icon" data-boss="Eye of Cthulhu" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Eater of Worlds|Post-Evil Boss" /> Eater of Worlds <img class="boss-icon" data-boss="Eater of Worlds" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Brain of Cthulhu|Post-Evil Boss" /> Brain of Cthulhu <img class="boss-icon" data-boss="Brain of Cthulhu" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Queen Bee" /> Queen Bee <img class="boss-icon" data-boss="Queen Bee" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Skeletron" /> Skeletron <img class="boss-icon" data-boss="Skeletron" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Deerclops" /> Deerclops <img class="boss-icon" data-boss="Deerclops" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Deviantt" /> Deviantt <img class="boss-icon" data-boss="Deviantt" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Hardmode" /> Wall of Flesh <img class="boss-icon" data-boss="Wall of Flesh" style="margin-left: 6px; transform: translateY(4px);"></label>
          </div>
        
          <div class="boss-section">
            <h3 style="color: #00e676">Hardmode</h3>
            <label><input type="checkbox" value="Post-Queen Slime" /> Queen Slime <img class="boss-icon" data-boss="Queen Slime" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-First Mech Boss" /> First Mech Boss <img class="boss-icon" data-boss="First Mech Boss" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Twins" /> The Twins <img class="boss-icon" data-boss="The Twins" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Destroyer" /> The Destroyer <img class="boss-icon" data-boss="Destroyer" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Skeletron Prime" /> Skeletron Prime <img class="boss-icon" data-boss="Skeletron Prime" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Mech Bosses" /> All Mech Bosses <img class="boss-icon" data-boss="Mech Bosses" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Plantera" /> Plantera <img class="boss-icon" data-boss="Plantera" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Golem" /> Golem <img class="boss-icon" data-boss="Golem" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Empress of Light" /> Empress of Light <img class="boss-icon" data-boss="Empress of Light" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Duke Fishron" /> Duke Fishron <img class="boss-icon" data-boss="Duke Fishron" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Lunatic Cultist" /> Lunatic Cultist <img class="boss-icon" data-boss="Lunatic Cultist" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Moon Lord" /> Moon Lord <img class="boss-icon" data-boss="Moon Lord" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Eridanus" /> Eridanus <img class="boss-icon" data-boss="Eridanus" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Abominationn" /> Abominationn <img class="boss-icon" data-boss="Abominationn" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Mutant" /> Mutant <img class="boss-icon" data-boss="Mutant" style="margin-left: 6px; transform: translateY(4px);"></label>
          </div>
        
          <div class="boss-section">
            <h3 style="color: #00e676">DLC</h3>
            <label><input type="checkbox" value="Post-Desert Scourge" /> Desert Scourge <img class="boss-icon" data-boss="Desert Scourge" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Perforators/Hive Mind" /> Perforators / Hive Mind <img class="boss-icon" data-boss="Perforators/Hive Mind" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Slime God" /> Slime God <img class="boss-icon" data-boss="Slime God" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Cryogen" /> Cryogen <img class="boss-icon" data-boss="Cryogen" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Providence" /> Providence <img class="boss-icon" data-boss="Providence" style="margin-left: 6px; transform: translateY(4px);"></label>
            <label><input type="checkbox" value="Post-Supreme Calamitas" /> Supreme Calamitas <img class="boss-icon" data-boss="Supreme Calamitas" style="margin-left: 6px; transform: translateY(4px);"></label>
          </div>
        
        </div>
        

        <div style="text-align: right; margin-top: 20px">
          <button
            id="confirmBossFilters"
            style="
              padding: 8px 14px;
              background: #00e676;
              border: none;
              border-radius: 4px;
              color: black;
              font-weight: bold;
              cursor: pointer;
            "
          >
            Confirm
          </button>
        </div>
      </div>
    </div>

    <script src="data.js"></script>
    <script>
      const iconMap = {
        "Wood Enchantment":
          "https://fargosmods.wiki.gg/images/3/37/Wood_Enchantment.png?bd2d81",
        "Adamantite Enchantment":
          "https://fargosmods.wiki.gg/images/e/ee/Adamantite_Enchantment.png?d11a0e",
        "Ancient Cobalt Enchantment":
          "https://fargosmods.wiki.gg/images/a/a4/Ancient_Cobalt_Enchantment.png?498825&format=original",
        "Ancient Hallowed Enchantment":
          "https://fargosmods.wiki.gg/images/5/52/Ancient_Hallowed_Enchantment.png?d83b61",
        "Ancient Shadow Enchantment":
          "https://fargosmods.wiki.gg/images/8/8d/Ancient_Shadow_Enchantment.png?b03220",
        "Angler Enchantment":
          "https://fargosmods.wiki.gg/images/c/ce/Angler_Enchantment.png?2e7a9f",
        "Apprentice Enchantment":
          "https://fargosmods.wiki.gg/images/2/20/Apprentice_Enchantment.png?59b4d0",
        "Ash Wood Enchantment":
          "https://fargosmods.wiki.gg/images/1/12/Ash_Wood_Enchantment.png?68c33b",
        "Bee Enchantment":
          "https://fargosmods.wiki.gg/images/a/a6/Bee_Enchantment.png?7c7b4f",
        "Beetle Enchantment":
          "https://fargosmods.wiki.gg/images/6/6f/Boreal_Wood_Enchantment.png?1c9359",
        "Boreal Wood Enchantment":
          "https://fargosmods.wiki.gg/images/6/6f/Boreal_Wood_Enchantment.png?1c9359",
        "Cactus Enchantment":
          "https://fargosmods.wiki.gg/images/e/e2/Cactus_Enchantment.png?41c1bf",
        "Chlorophyte Enchantment":
          "https://fargosmods.wiki.gg/images/c/ca/Chlorophyte_Enchantment.png?b0667e",
        "Cobalt Enchantment":
          "https://fargosmods.wiki.gg/images/4/45/Cobalt_Enchantment.png?85ff95",
        "Copper Enchantment":
          "https://fargosmods.wiki.gg/images/7/74/Copper_Enchantment.png?c783b3",
        "Crimson Enchantment":
          "https://fargosmods.wiki.gg/images/b/bf/Crimson_Enchantment.png?fe437b",
        "Crystal Assassin Enchantment":
          "https://fargosmods.wiki.gg/images/1/1e/Crystal_Assassin_Enchantment.png?e9fe57",
        "Dark Artist Enchantment":
          "https://fargosmods.wiki.gg/images/b/ba/Dark_Artist_Enchantment.png?5bd3cb",
        "Ebonwood Enchantment":
          "https://fargosmods.wiki.gg/images/7/7d/Ebonwood_Enchantment.png?5f9000",
        "Forbidden Enchantment":
          "https://fargosmods.wiki.gg/images/4/4b/Forbidden_Enchantment.png?4ea56b",
        "Fossil Enchantment":
          "https://fargosmods.wiki.gg/images/f/fb/Fossil_Enchantment.png?d65580",
        "Frost Enchantment":
          "https://fargosmods.wiki.gg/images/f/f0/Frost_Enchantment.png?9efd20",
        "Gladiator Enchantment":
          "https://fargosmods.wiki.gg/images/f/f1/Gladiator_Enchantment.png?7f50e7",
        "Gold Enchantment":
          "https://fargosmods.wiki.gg/images/6/63/Gold_Enchantment.png?ae6009",
        "Hallowed Enchantment":
          "https://fargosmods.wiki.gg/images/6/6e/Hallowed_Enchantment.png?6a6db4",
        "Huntress Enchantment":
          "https://fargosmods.wiki.gg/images/b/be/Huntress_Enchantment.png?9ee3d9",
        "Iron Enchantment":
          "https://fargosmods.wiki.gg/images/9/9e/Iron_Enchantment.png?f5f309",
        "Jungle Enchantment":
          "https://fargosmods.wiki.gg/images/f/fb/Jungle_Enchantment.png?bfd4e5",
        "Lead Enchantment":
          "https://fargosmods.wiki.gg/images/2/2a/Lead_Enchantment.png?b27a9c",
        "Meteor Enchantment":
          "https://fargosmods.wiki.gg/images/2/27/Meteor_Enchantment.png?c819eb",
        "Miner Enchantment":
          "https://fargosmods.wiki.gg/images/9/93/Miner_Enchantment.png?dde8f1",
        "Molten Enchantment":
          "https://fargosmods.wiki.gg/images/a/a1/Molten_Enchantment.png?496bb1",
        "Monk Enchantment":
          "https://fargosmods.wiki.gg/images/4/45/Monk_Enchantment.png?34f376",
        "Mythril Enchantment":
          "https://fargosmods.wiki.gg/images/d/da/Mythril_Enchantment.png?f520fd",
        "Nebula Enchantment":
          "https://fargosmods.wiki.gg/images/d/d5/Nebula_Enchantment.png?b863fd",
        "Necro Enchantment":
          "https://fargosmods.wiki.gg/images/a/a9/Necro_Enchantment.png?7bab6a",
        "Ninja Enchantment":
          "https://fargosmods.wiki.gg/images/2/21/Ninja_Enchantment.png?59cacc",
        "Obsidian Enchantment":
          "https://fargosmods.wiki.gg/images/5/5e/Obsidian_Enchantment.png?8a5d00",
        "Orichalcum Enchantment":
          "https://fargosmods.wiki.gg/images/2/2b/Orichalcum_Enchantment.png?a8ea78",
        "Palladium Enchantment":
          "https://fargosmods.wiki.gg/images/f/f3/Palladium_Enchantment.png?61b199",
        "Palm Wood Enchantment":
          "https://fargosmods.wiki.gg/images/e/e3/Palm_Wood_Enchantment.png?c3e4b1",
        "Pearlwood Enchantment":
          "https://fargosmods.wiki.gg/images/5/54/Pearlwood_Enchantment.png?78a28a",
        "Platinum Enchantment":
          "https://fargosmods.wiki.gg/images/3/3a/Platinum_Enchantment.png?347407",
        "Pumpkin Enchantment":
          "https://fargosmods.wiki.gg/images/3/3d/Pumpkin_Enchantment.png?48d6c7",
        "Rain Enchantment":
          "https://fargosmods.wiki.gg/images/3/3f/Rain_Enchantment.png?c78e6a",
        "Red Riding Enchantment":
          "https://fargosmods.wiki.gg/images/e/e3/Red_Riding_Enchantment.png?795963",
        "Rich Mahogany Enchantment":
          "https://fargosmods.wiki.gg/images/5/5a/Rich_Mahogany_Enchantment.png?b28d23",
        "Shadewood Enchantment":
          "https://fargosmods.wiki.gg/images/3/3e/Shadewood_Enchantment.png?6882c0",
        "Shadow Enchantment":
          "https://fargosmods.wiki.gg/images/3/38/Shadow_Enchantment.png?cdea6a",
        "Shinobi Infiltrator Enchantment":
          "https://fargosmods.wiki.gg/images/9/93/Shinobi_Infiltrator_Enchantment.png?9541f6",
        "Shroomite Enchantment":
          "https://fargosmods.wiki.gg/images/0/04/Shroomite_Enchantment.png?1be791",
        "Silver Enchantment":
          "https://fargosmods.wiki.gg/images/8/8f/Silver_Enchantment.png?2b0e19",
        "Snow Enchantment":
          "https://fargosmods.wiki.gg/images/a/ab/Snow_Enchantment.png?7efdca",
        "Solar Enchantment":
          "https://fargosmods.wiki.gg/images/6/67/Solar_Enchantment.png?d10545",
        "Spectre Enchantment":
          "https://fargosmods.wiki.gg/images/9/9c/Spectre_Enchantment.png?5905a8",
        "Spider Enchantment":
          "https://fargosmods.wiki.gg/images/b/b9/Spider_Enchantment.png?3089c3",
        "Spooky Enchantment":
          "https://fargosmods.wiki.gg/images/b/b2/Spooky_Enchantment.png?859caa",
        "Squire Enchantment":
          "https://fargosmods.wiki.gg/images/d/d9/Squire_Enchantment.png?97b546",
        "Stardust Enchantment":
          "https://fargosmods.wiki.gg/images/1/13/Stardust_Enchantment.png?96c141",
        "Tiki Enchantment":
          "https://fargosmods.wiki.gg/images/4/4a/Tiki_Enchantment.png?543280",
        "Tin Enchantment":
          "https://fargosmods.wiki.gg/images/c/c6/Tin_Enchantment.png?4bc69e",
        "Titanium Enchantment":
          "https://fargosmods.wiki.gg/images/c/c2/Titanium_Enchantment.png?bc5ec1",
        "Tungsten Enchantment":
          "https://fargosmods.wiki.gg/images/0/0a/Tungsten_Enchantment.png?85af74",
        "Turtle Enchantment":
          "https://fargosmods.wiki.gg/images/d/dc/Turtle_Enchantment.png?c6ed34",
        "Valhalla Knight Enchantment":
          "https://fargosmods.wiki.gg/images/2/2c/Valhalla_Knight_Enchantment.png?9bbed8",
        "Vortex Enchantment":
          "https://fargosmods.wiki.gg/images/2/28/Vortex_Enchantment.png?5812ba",
        "Wizard Enchantment":
          "https://fargosmods.wiki.gg/images/7/74/Wizard_Enchantment.png?a1df62",
        "Force of Cosmos":
          "https://fargosmods.wiki.gg/images/b/b4/Force_of_Cosmos.png?b6802d",
        "Force of Death":
          "https://fargosmods.wiki.gg/images/2/24/Force_of_Death.png?e567a7",
        "Force of Earth":
          "https://fargosmods.wiki.gg/images/1/15/Force_of_Earth.png?d426e6",
        "Force of Life":
          "https://fargosmods.wiki.gg/images/0/08/Force_of_Life.png?190b8e",
        "Force of Nature":
          "https://fargosmods.wiki.gg/images/2/29/Force_of_Nature.png?46e4e8",
        "Force of Spirit":
          "https://fargosmods.wiki.gg/images/2/2b/Force_of_Spirit.png?5f0cbd",
        "Force of Terra":
          "https://fargosmods.wiki.gg/images/2/29/Force_of_Terra.png?a0d0d3",
        "Force of Timber":
          "https://fargosmods.wiki.gg/images/b/bd/Force_of_Timber.png?f13539",
        "Force of Will":
          "https://fargosmods.wiki.gg/images/d/d2/Force_of_Will.png?aafe81",
        "Apprentice\u2019s Essence":
          "https://fargosmods.wiki.gg/images/1/11/Apprentice%27s_Essence.png?125979",
        "Barbarian\u2019s Essence":
          "https://fargosmods.wiki.gg/images/b/b7/Barbarian%27s_Essence.png?ddb12a",
        "Occultist\u2019s Essence":
          "https://fargosmods.wiki.gg/images/8/8b/Occultist%27s_Essence.png?370db0",
        "Sharpshooter\u2019s Essence":
          "https://fargosmods.wiki.gg/images/6/68/Sharpshooter%27s_Essence.png?df2506",
        "Arch Wizard\u2019s Soul":
          "https://fargosmods.wiki.gg/images/6/69/Arch_Wizard%27s_Soul.png?1ab601",
        "Berserker\u2019s Soul":
          "https://fargosmods.wiki.gg/images/e/ed/Berserker%27s_Soul.png?fc57f9",
        "Colossus Soul":
          "https://fargosmods.wiki.gg/images/b/bc/Colossus_Soul.png?dba466",
        "Conjurist\u2019s Soul":
          "https://fargosmods.wiki.gg/images/3/3d/Conjurist%27s_Soul.png?d3b948",
        "Flight Mastery Soul":
          "https://fargosmods.wiki.gg/images/9/90/Flight_Mastery_Soul.png?f2437e",
        "Sniper\u2019s Soul":
          "https://fargosmods.wiki.gg/images/4/44/Sniper%27s_Soul.png?ab4d4c",
        "Soul of Dimensions":
          "https://fargosmods.wiki.gg/images/5/57/Soul_of_Dimensions.gif?9dcac3",
        "Soul of Eternity":
          "https://fargosmods.wiki.gg/images/9/99/Soul_of_Eternity.gif?e3979f",
        "Soul of Terraria":
          "https://fargosmods.wiki.gg/images/f/f5/Soul_of_Terraria.gif?ac4b28",
        "Soul of the Master":
          "https://fargosmods.wiki.gg/images/a/a2/Soul_of_the_Master.png?7fe6b5",
        "Soul of the Universe":
          "https://fargosmods.wiki.gg/images/d/d9/Soul_of_the_Universe.gif?e3e6a5",
        "Supersonic Soul":
          "https://fargosmods.wiki.gg/images/c/c5/Supersonic_Soul.png?e55a3d",
        "Trawler Soul":
          "https://fargosmods.wiki.gg/images/9/95/Trawler_Soul.png?66580e",
        "World Shaper Soul":
          "https://fargosmods.wiki.gg/images/9/91/World_Shaper_Soul.png?f58d8f",
        "Abominable Wand":
          "https://fargosmods.wiki.gg/images/b/be/Abominable_Wand.gif?bec4ef",
        "Aeolus Boots":
          "https://fargosmods.wiki.gg/images/d/d6/Aeolus_Boots.png?9248ed",
        "Agitating Lens":
          "https://fargosmods.wiki.gg/images/d/d8/Agitating_Lens.png?cf19a2",
        "Bionomic Cluster":
          "https://fargosmods.wiki.gg/images/f/f4/Bionomic_Cluster.png?2558c3",
        "Box of Gizmos":
          "https://fargosmods.wiki.gg/images/2/22/Box_of_Gizmos.png?a30e89",
        "Celestial Rune":
          "https://fargosmods.wiki.gg/images/2/20/Celestial_Rune.png?a98a51",
        "Chalice of the Moon":
          "https://fargosmods.wiki.gg/images/6/6d/Chalice_of_the_Moon.png?608d76",
        "Computation Orb":
          "https://fargosmods.wiki.gg/images/1/1d/Computation_Orb.png?190d86",
        "Concentrated Rainbow Matter":
          "https://fargosmods.wiki.gg/images/5/5c/Concentrated_Rainbow_Matter.png?7ad6e3",
        "Cosmic Core":
          "https://fargosmods.wiki.gg/images/1/18/Cosmic_Core.gif?9bf09d",
        "Crystal Skull":
          "https://fargosmods.wiki.gg/images/f/f3/Crystal_Skull.png?976600",
        "Darkened Heart":
          "https://fargosmods.wiki.gg/images/8/8c/Darkened_Heart.png?93950e",
        "Dread Shell":
          "https://fargosmods.wiki.gg/images/f/f2/Dread_Shell.png?392784",
        "Dubious Circuitry":
          "https://fargosmods.wiki.gg/images/6/64/Dubious_Circuitry.png?db516d",
        "Eurus Socks":
          "https://fargosmods.wiki.gg/images/6/66/Eurus_Socks.png?f9bcf4",
        "Frigid Grasp":
          "https://fargosmods.wiki.gg/images/4/41/Frigid_Grasp.png?51dd11",
        "Fused Lens":
          "https://fargosmods.wiki.gg/images/8/83/Fused_Lens.png?687e60",
        "Gutted Heart":
          "https://fargosmods.wiki.gg/images/3/34/Gutted_Heart.png?39c4ef",
        "Heart of the Master":
          "https://fargosmods.wiki.gg/images/f/f8/Heart_of_the_Master.gif?936db2",
        "Ice Queen\u2019s Crown":
          "https://fargosmods.wiki.gg/images/6/6b/Ice_Queen%27s_Crown.png?a9a938",
        "Lizhard Treasure Box":
          "https://fargosmods.wiki.gg/images/6/66/Lihzahrd_Treasure_Box.png?d8a096",
        "Lump of Flesh":
          "https://fargosmods.wiki.gg/images/d/d7/Lump_of_Flesh.png?80bba6",
        "Medallion of the Fallen King":
          "https://fargosmods.wiki.gg/images/0/02/Medallion_of_the_Fallen_King.png?1ffc66",
        "Mutant Antibodies":
          "https://fargosmods.wiki.gg/images/8/8e/Mutant_Antibodies.png?5ae94c",
        "Mutant Eye":
          "https://fargosmods.wiki.gg/images/f/fb/Mutant_Eye.gif?309e06",
        "Mystic Skull":
          "https://fargosmods.wiki.gg/images/8/8c/Mystic_Skull.gif?d4093c",
        "Necromantic Brew":
          "https://fargosmods.wiki.gg/images/8/83/Necromantic_Brew.png?372323",
        "Nymph\u2019s Perfume":
          "https://fargosmods.wiki.gg/images/3/38/Nymph%27s_Perfume.png?9791c0",
        "Paradox Wolf Soul":
          "https://fargosmods.wiki.gg/images/2/2d/Paradox_Wolf_Soul.png?11fc9c",
        "Precision Seal":
          "https://fargosmods.wiki.gg/images/e/ee/Precision_Seal.png?458968",
        "Puff in a Bottle":
          "https://fargosmods.wiki.gg/images/f/f4/Puff_in_a_Bottle.png?f6fbc3",
        "Pumpking\u2019s Cape":
          "https://fargosmods.wiki.gg/images/e/e1/Pumpking%27s_Cape.png?ba5684",
        "Pungent Eyeball":
          "https://fargosmods.wiki.gg/images/0/06/Pungent_Eyeball.png?3491ac",
        "Razor Container":
          "https://fargosmods.wiki.gg/images/f/f3/Razor_Container.png?c70558",
        "Reinforced Plating":
          "https://fargosmods.wiki.gg/images/7/7f/Reinforced_Plating.png?b78f72",
        "Remote Control":
          "https://fargosmods.wiki.gg/images/f/f4/Remote_Control.png?65810b",
        "Security Wallet":
          "https://fargosmods.wiki.gg/images/4/42/Security_Wallet.png?e260cb",
        "Sinister Icon":
          "https://fargosmods.wiki.gg/images/4/48/Sinister_Icon.png?7b9327",
        "Slimy Shield":
          "https://fargosmods.wiki.gg/images/2/24/Slimy_Shield.png?435062",
        "Sparkling Adoration":
          "https://fargosmods.wiki.gg/images/1/1f/Sparkling_Adoration.gif?dcdf4b",
        "Squeaky Toy":
          "https://fargosmods.wiki.gg/images/8/84/Squeaky_Toy.png?bde24b",
        "Supreme Deathbringer Fairy":
          "https://fargosmods.wiki.gg/images/2/2b/Supreme_Deathbringer_Fairy.png?c84b63",
        "The Queen\u2019s Stinger":
          "https://fargosmods.wiki.gg/images/0/0f/The_Queen%27s_Stinger.png?d18b71",
        "Tim\u2019s Concoction":
          "https://fargosmods.wiki.gg/images/2/28/Tim%27s_Concoction.png?91dac2",
        "Tribal Charm":
          "https://fargosmods.wiki.gg/images/d/d3/Tribal_Charm.png?3afa0e",
        "Verdant Doomsayer Mask":
          "https://fargosmods.wiki.gg/images/b/b8/Verdant_Doomsayer_Mask.png?6b4591",
        "Wretched Pouch":
          "https://fargosmods.wiki.gg/images/3/36/Wretched_Pouch.png?303706",
        "Wyvern Feather":
          "https://fargosmods.wiki.gg/images/d/da/Wyvern_Feather.png?5a8d19",
        "Zephyr Boots":
          "https://fargosmods.wiki.gg/images/c/ce/Zephyr_Boots.png?f01e35",
        "Aerospec Enchantment":
          "https://fargosmods.wiki.gg/images/2/21/Aerospec_Enchantment.png?fbfe1b",
        "Desert Prowler Enchantment":
          "https://fargosmods.wiki.gg/images/1/14/Desert_Prowler_Enchantment.png?39bce9",
        "Marnite Architect Enchantment":
          "https://fargosmods.wiki.gg/images/d/dc/Marnite_Architect_Enchantment.png?5f8f34",
        "Snow Ruffian Enchantment":
          "https://fargosmods.wiki.gg/images/e/e1/Snow_Ruffian_Enchantment.png?189656",
        "Sulphurous Enchantment":
          "https://fargosmods.wiki.gg/images/d/d7/Sulphur_Enchantment.png?e5ed4e",
        "Victide Enchantment":
          "https://fargosmods.wiki.gg/images/8/8f/Victide_Enchantment.png?b50208",
        "Daedalus Enchantment":
          "https://fargosmods.wiki.gg/images/d/d5/Daedalus_Enchantment.png?f4fbff",
        "Hydrothermic Enchantment":
          "https://fargosmods.wiki.gg/images/1/13/Hydrothermic_Enchantment.png?769634",
        "Reaver Enchantment":
          "https://fargosmods.wiki.gg/images/6/64/Reaver_Enchantment.png?750db1",
        "Statigel Enchantment":
          "https://fargosmods.wiki.gg/images/e/ec/Statigel_Enchantment.png?4f5793",
        "Titan Heart Enchantment":
          "https://fargosmods.wiki.gg/images/1/15/Titan_Heart_Enchantment.png?9116af",
        "Wulfrum Enchantment":
          "https://fargosmods.wiki.gg/images/8/8d/Wulfrum_Enchantment.png?772cfe",
        "Force of the Elements":
          "https://fargosmods.wiki.gg/images/0/0e/Force_of_the_Elements.png?d11af0",
        "Force of the Gale":
          "https://fargosmods.wiki.gg/images/7/7f/Force_of_the_Gale.png?c78b26",
        "Outlaw\u2019s Essence":
          "https://fargosmods.wiki.gg/images/6/6b/Outlaw%27s_Essence.png?ee2f09",
        "Vagabond\u2019s Soul":
          "https://fargosmods.wiki.gg/images/9/9f/Vagabond%27s_Soul.png?15fb14",
        "Brand of the Brimstone Witch":
          "https://fargosmods.wiki.gg/images/c/ce/Brand_of_the_Brimstone_Witch.png?a00ed6",
        "Sands of Time":
          "https://fargosmods.wiki.gg/images/7/7b/Sands_of_Time.png?b08270",
        "Pure Heart":
          "https://fargosmods.wiki.gg/images/e/ed/Pure_Heart.png?dd0a59",
        "Gelic Wings":
          "https://fargosmods.wiki.gg/images/f/ff/Gelic_Wings.png?a125b3",
        "Deerclawps":
          "https://fargosmods.wiki.gg/images/4/40/Deerclawps.png?e97e1d",
        "Magical Bulb":
          "https://fargosmods.wiki.gg/images/3/3a/Magical_Bulb.png?d6dbd1",
        "Lihzahrd Treasure Box":
          "https://fargosmods.wiki.gg/images/6/66/Lihzahrd_Treasure_Box.png?d8a096",
        "Saucer Control Console":
          "https://fargosmods.wiki.gg/images/3/3a/Saucer_Control_Console.png?faf8d2",
        "Betsy\u2019s Heart":
          "https://fargosmods.wiki.gg/images/a/a5/Betsy%27s_Heart.png?d1157d",
          "King Slime": "https://terraria.wiki.gg/images/thumb/5/5e/Map_Icon_King_Slime.png/24px-Map_Icon_King_Slime.png?562680",
          "Eye of Cthulhu": "https://terraria.wiki.gg/images/thumb/a/a1/Map_Icon_Eye_of_Cthulhu_%28first_form%29.png/24px-Map_Icon_Eye_of_Cthulhu_%28first_form%29.png?1b90a8",
          "Eater of Worlds": "https://terraria.wiki.gg/images/7/75/Map_Icon_Eater_of_Worlds.png?36686b",
          "Brain of Cthulhu": "https://terraria.wiki.gg/images/thumb/f/fb/Map_Icon_Brain_of_Cthulhu.png/24px-Map_Icon_Brain_of_Cthulhu.png?16b3e8",
          "Queen Bee": "https://terraria.wiki.gg/images/thumb/c/c6/Map_Icon_Queen_Bee.png/24px-Map_Icon_Queen_Bee.png?fb556e",
          "Skeletron": "https://terraria.wiki.gg/images/thumb/f/f4/Map_Icon_Skeletron.png/24px-Map_Icon_Skeletron.png?e9491e",
          "Deerclops": "https://terraria.wiki.gg/images/thumb/c/c9/Map_Icon_Deerclops.png/24px-Map_Icon_Deerclops.png?7e136a",
          "Wall of Flesh": "https://terraria.wiki.gg/images/thumb/d/d4/Map_Icon_Wall_of_Flesh.png/24px-Map_Icon_Wall_of_Flesh.png?670a42",
          "Queen Slime": "https://terraria.wiki.gg/images/thumb/9/95/Map_Icon_Queen_Slime.png/24px-Map_Icon_Queen_Slime.png?3ee22f",
          "The Twins": "https://terraria.wiki.gg/images/thumb/c/cd/Map_Icon_Twins_%28combined%29.png/24px-Map_Icon_Twins_%28combined%29.png?e09adf",
          "Destroyer": "https://terraria.wiki.gg/images/6/6f/Map_Icon_The_Destroyer.png?afef19",
          "Skeletron Prime": "https://terraria.wiki.gg/images/thumb/b/be/Map_Icon_Skeletron_Prime.png/24px-Map_Icon_Skeletron_Prime.png?6176b4",
          "Plantera": "https://terraria.wiki.gg/images/thumb/a/ab/Map_Icon_Plantera_%28first_form%29.png/24px-Map_Icon_Plantera_%28first_form%29.png?82259e",
          "Golem": "https://terraria.wiki.gg/images/thumb/b/b7/Map_Icon_Golem.png/24px-Map_Icon_Golem.png?c525a1",
          "Empress of Light": "https://terraria.wiki.gg/images/thumb/5/5d/Map_Icon_Empress_of_Light.png/24px-Map_Icon_Empress_of_Light.png?d661ba",
          "Duke Fishron": "https://terraria.wiki.gg/images/thumb/e/e9/Map_Icon_Duke_Fishron.png/24px-Map_Icon_Duke_Fishron.png?bea35f",
          "Lunatic Cultist": "https://terraria.wiki.gg/images/thumb/6/68/Map_Icon_Lunatic_Cultist.png/24px-Map_Icon_Lunatic_Cultist.png?aa94cd",
          "Moon Lord": "https://terraria.wiki.gg/images/thumb/8/82/Map_Icon_Moon_Lord.png/24px-Map_Icon_Moon_Lord.png?d0327b",
          "Trojan Squirrel": "https://fargosmods.wiki.gg/images/thumb/9/90/Map_Icon_Trojan_Squirrel.png/20px-Map_Icon_Trojan_Squirrel.png?ad10a1",
          "Deviantt": "https://fargosmods.wiki.gg/images/thumb/e/e3/Map_Icon_Deviantt_%28boss%29.png/20px-Map_Icon_Deviantt_%28boss%29.png?2e3df9",
          "Eridanus": "https://fargosmods.wiki.gg/images/thumb/d/d1/Map_Icon_Eridanus.png/20px-Map_Icon_Eridanus.png?d592b0",
          "Abominationn": "https://fargosmods.wiki.gg/images/thumb/2/27/Map_Icon_Abominationn_%28boss%29.png/20px-Map_Icon_Abominationn_%28boss%29.png?395389",
          "Mutant": "https://fargosmods.wiki.gg/images/thumb/b/b9/Map_Icon_Mutant_%28boss%29.png/20px-Map_Icon_Mutant_%28boss%29.png?c432f8",
          "Desert Scourge": "https://calamitymod.wiki.gg/images/thumb/6/6d/Desert_Scourge_map.png/25px-Desert_Scourge_map.png?490817",
          "Perforators/Hive Mind": "https://calamitymod.wiki.gg/images/thumb/e/e3/Perforator_Hive_map.png/25px-Perforator_Hive_map.png?8938ce",
          "Slime God": "https://calamitymod.wiki.gg/images/thumb/4/41/Slime_God_Core_map.png/20px-Slime_God_Core_map.png?31e484",
          "Providence": "https://calamitymod.wiki.gg/images/thumb/f/fb/Providence_map.png/35px-Providence_map.png?d8559f",
          "Supreme Calamitas": "https://calamitymod.wiki.gg/images/thumb/a/a4/Calamitas_map.png/25px-Calamitas_map.png?ac6665",
          "Cryogen": "https://calamitymod.wiki.gg/images/thumb/1/1e/Cryogen_map.png/25px-Cryogen_map.png?a96d3d",
          "No Bosses": "https://static.wikia.nocookie.net/terraria_gamepedia/images/9/98/Map_Icon_Guide.png/revision/latest?cb=20170623015731",
          "Mech Bosses": "https://terraria.wiki.gg/images/thumb/9/91/Ocram%27s_Razor.png/25px-Ocram%27s_Razor.png?c7c23c",
          "First Mech Boss": "https://terraria.wiki.gg/images/5/59/Mechanical_Cart.png?5a7b36"
      };
      
      const bossBtn = document.getElementById("bossFilterBtn");
      const bossModal = document.getElementById("bossModal");
      const closeBossModal = document.getElementById("closeBossModal");
      const confirmBossFilters = document.getElementById("confirmBossFilters");
      const bossCheckboxes = bossModal.querySelectorAll(
        'input[type="checkbox"]'
      );
      let selectedBossFilters = new Set();
      let showDLCItems = true;

      bossBtn.onclick = () => {
        bossModal.style.display = "block";
      };

      closeBossModal.onclick = () => {
        bossModal.style.display = "none";
      };

      window.addEventListener("click", (e) => {
        if (e.target === bossModal) bossModal.style.display = "none";
      });

      confirmBossFilters.onclick = () => {
        selectedBossFilters.clear();
        bossCheckboxes.forEach((box) => {
          if (box.checked) {
            const values = box.value.split("|");
            values.forEach((val) => selectedBossFilters.add(val));
          }
        });
        bossModal.style.display = "none";
        renderCards();
      };

      const container = document.getElementById("cards-container");
      const searchInput = document.getElementById("search");
      const clearBtn = document.getElementById("clearSearch");
      const buttons = document.querySelectorAll(".filter-button");
      let activeStars = new Set();
      let activeType = null;

      function truncate(text, maxLength) {
        return text.length > maxLength
          ? text.slice(0, maxLength) + "..."
          : text;
      }

      function createCard(item) {
        const iconURL =
          iconMap[item.name] ||
          "https://fargosmods.wiki.gg/images/6/6e/Missing_image.png";
        const card = document.createElement("div");
        card.className = "card";
        card.setAttribute("data-full", JSON.stringify(item));
        card.innerHTML = `
        <img src="${iconURL}" alt="${
          item.name
        } icon" style="position: absolute; top: 10px; right: 10px; width: 40px; height: 40px; object-fit: contain; border-radius: 5px;">
        <div class="title">${item.name}</div>
        <div class="stars">${item.rating}</div>
        <div class="type">${item.type}</div>
        <div class="description">${truncate(item.description, 400)}</div>
      `;
        return card;
      }

      function renderCards() {
        container.innerHTML = "";
        const keyword = searchInput.value.toLowerCase();
        const filtered = data.filter((item) => {
          const matchesStar =
            activeStars.size === 0 || activeStars.has(item.rating);
          const matchesType = !activeType || item.type === activeType;
          const matchesSearch = item.name.toLowerCase().includes(keyword);
          const matchesBoss =
            selectedBossFilters.size === 0 ||
            selectedBossFilters.has(item.availability);
          if (!showDLCItems && item.dlc === true) {
            return false; // exclude DLC items when toggle is off
          }

          return matchesStar && matchesType && matchesSearch && matchesBoss;
        });

        filtered.forEach((item) => container.appendChild(createCard(item)));
        bindCardClicks();
        updateClearButton();
      }

      searchInput.addEventListener("input", renderCards);

      clearBtn.addEventListener("click", () => {
        searchInput.value = "";
        renderCards();
      });

      function updateClearButton() {
        clearBtn.classList.toggle("active", searchInput.value.trim() !== "");
      }

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const star = btn.getAttribute("data-star");
          const type = btn.getAttribute("data-type");

          if (star) {
            btn.classList.toggle("active");
            if (activeStars.has(star)) {
              activeStars.delete(star);
            } else {
              activeStars.add(star);
            }
          }

          if (type) {
            document
              .querySelectorAll("[data-type]")
              .forEach((b) => b.classList.remove("active"));
            if (activeType === type) {
              activeType = null;
            } else {
              activeType = type;
              btn.classList.add("active");
            }
          }

          renderCards();
        });
      });

      const modal = document.getElementById("cardModal");
      const modalBody = document.getElementById("modalBody");
      const closeBtn = document.querySelector(".close-button");

      closeBtn.onclick = () => {
        modal.style.display = "none";
      };
      window.onclick = (event) => {
        if (event.target === modal) modal.style.display = "none";
      };

      function bindCardClicks() {
        document.querySelectorAll(".card").forEach((card) => {
          card.onclick = () => {
            const item = JSON.parse(card.getAttribute("data-full"));
            const wikiName = encodeURIComponent(
              item.name.replace(/’/g, "'").replace(/ /g, "_")
            );

            const wikiURL = `https://fargosmods.wiki.gg/wiki/${wikiName}`;
            const iconURL =
              iconMap[item.name] ||
              "https://fargosmods.wiki.gg/images/6/6e/Missing_image.png";
              modalBody.innerHTML = `
  <div class="title" style="display: flex; align-items: center; gap: 8px;">
    <span>${item.name}</span>
    <img src="${iconURL}" alt="${item.name} icon"
         style="width: 1.2em; height: 1.2em; object-fit: contain; border-radius: 4px;">
  </div>
  <div class="stars">${item.rating}</div>
  <div class="type">${item.type}</div>
  <div class="description">${item.description}</div>
  <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
  <div style="color: white; font-size: 0.95em;">Availability: ${item.availability || "Unknown"}</div>
  <a href="${wikiURL}" target="_blank" style="color: #00e676; text-decoration: underline;">Wiki Link</a>
</div>

`;

            modal.style.display = "block";
          };
        });
      }

      const dlcToggle = document.getElementById("dlcToggle");

      dlcToggle.addEventListener("click", () => {
        showDLCItems = !showDLCItems;
        dlcToggle.classList.toggle("active", showDLCItems);
        dlcToggle.classList.toggle("inactive", !showDLCItems);
        renderCards();
      });

      const resetFiltersBtn = document.getElementById("resetFiltersBtn");

      resetFiltersBtn.addEventListener("click", () => {
        // Reset star filters
        activeStars.clear();
        document
          .querySelectorAll(".filter-button[data-star]")
          .forEach((btn) => {
            btn.classList.remove("active");
          });

        // Reset type filter
        activeType = null;
        document
          .querySelectorAll(".filter-button[data-type]")
          .forEach((btn) => {
            btn.classList.remove("active");
          });

          searchInput.value = "";


        // Reset DLC toggle (turn it on)
        showDLCItems = false;
        dlcToggle.classList.remove("active");
        dlcToggle.classList.add("inactive");

        // Reset boss filters (uncheck all)
        selectedBossFilters.clear();
        bossCheckboxes.forEach((box) => (box.checked = false));

        // Re-render cards with no filters
        renderCards();
      });

      renderCards();

      document.querySelectorAll('img.boss-icon').forEach(img => {
  const key = img.getAttribute('data-boss');
  img.src = iconMap[key] || "https://fargosmods.wiki.gg/images/6/6e/Missing_image.png";
});

    </script>
  </body>
</html>
